# 录制页面 (Record Page) PRD

## 1. 页面概述

录制页面是 LazyAud.io 的核心功能页面，提供音频录制和实时转录功能。用户可以在录制音频的同时，实时查看转录结果并进行 AI 处理。

## 2. 页面布局

### 2.1 基础布局

```
┌─────────────────────────────────────────┐
│ 🎙️ 新建录制                              │
├─────────────────────────────────────────┤
│ 音频源选择                                │
│ ○ 系统音频  ○ 应用音频                    │
│ ☐ 同时录制麦克风                          │
├─────────────────────────────────────────┤
│ 应用选择 (当选择应用音频时显示)             │
│ [下拉菜单: 选择应用...]                    │
├─────────────────────────────────────────┤
│ 录制标题                                  │
│ [输入框: 会议记录 - 2024.01.15]           │
├─────────────────────────────────────────┤
│ 保存位置                                  │
│ [~/Documents/LazyAud] [选择文件夹...]     │
├─────────────────────────────────────────┤
│           [🔴 开始录制]                   │
└─────────────────────────────────────────┘
```

## 3. 功能组件详细说明

### 3.1 音频源选择器

#### 3.1.1 系统音频选项
- **功能**：录制整个系统的音频输出
- **交互**：
  - 点击单选按钮选择
  - 显示实时音频电平
  - 显示当前系统音量

#### 3.1.2 应用音频选项
- **功能**：录制特定应用的音频输出
- **交互**：
  - 点击单选按钮选择
  - 显示应用选择下拉菜单
  - 实时更新应用列表
  - 显示应用图标和名称

#### 3.1.3 麦克风录制选项
- **功能**：同时录制麦克风输入
- **交互**：
  - 复选框控制
  - 显示麦克风实时电平
  - 显示当前选择的麦克风设备

### 3.2 应用选择器

#### 3.2.1 下拉菜单
- **功能**：选择要录制的应用
- **交互**：
  - 点击展开应用列表
  - 显示应用图标和名称
  - 支持搜索过滤
  - 显示应用当前状态（运行中/未运行）

#### 3.2.2 应用列表项
- **显示内容**：
  - 应用图标
  - 应用名称
  - 运行状态指示器
  - 音频活动指示器

### 3.3 录制配置

#### 3.3.1 标题输入
- **功能**：设置录制文件标题
- **交互**：
  - 文本输入框
  - 默认值：录制 + 时间戳
  - 支持自定义输入
  - 实时验证（不允许特殊字符）

#### 3.3.2 保存位置
- **功能**：设置录制文件保存位置
- **交互**：
  - 显示当前保存路径
  - 文件夹选择按钮
  - 支持拖放设置
  - 显示可用空间

### 3.4 录制控制

#### 3.4.1 开始录制按钮
- **功能**：启动/停止录制
- **交互**：
  - 大号醒目按钮
  - 录制中状态变化
  - 显示录制时长
  - 显示文件大小

### 3.5 转录功能

#### 3.5.1 转录状态栏
- **功能**：显示当前转录状态
- **状态类型**：
  - 🟢 转录中
  - ⚪ 暂停
  - 🔴 停止
  - ⚠️ 错误
- **显示内容**：
  - 转录状态
  - 当前模型
  - 语言设置
  - 置信度指标

#### 3.5.2 转录文本区域
- **功能**：显示实时转录文本
- **特性**：
  - 时间戳标记
  - 自动滚动
  - 文本格式化
  - 支持选择
- **交互功能**：
  - 文本选择
  - 复制文本
  - 编辑文本
  - 添加标记
  - 搜索文本

#### 3.5.3 AI 操作栏
- **摘要功能**：
  - 生成内容摘要
  - 支持自定义长度
  - 实时更新
  - 支持导出
- **任务提取**：
  - 自动识别任务
  - 分类显示
  - 支持编辑
  - 导出任务列表
- **翻译功能**：
  - 选择目标语言
  - 显示翻译结果
  - 支持多语言
  - 保持格式
- **提问功能**：
  - 输入问题
  - 显示回答
  - 支持追问
  - 保存对话

## 4. 状态变化

### 4.1 录制前状态

```
┌─────────────────────────────────────────┐
│ 🎙️ 新建录制                              │
├─────────────────────────────────────────┤
│ 音频源选择                                │
│ ○ 系统音频  ○ 应用音频                    │
│ ☐ 同时录制麦克风                          │
├─────────────────────────────────────────┤
│ 应用选择 (当选择应用音频时显示)             │
│ [下拉菜单: 选择应用...]                    │
├─────────────────────────────────────────┤
│ 录制标题                                  │
│ [输入框: 会议记录 - 2024.01.15]           │
├─────────────────────────────────────────┤
│ 保存位置                                  │
│ [~/Documents/LazyAud] [选择文件夹...]     │
├─────────────────────────────────────────┤
│           [🔴 开始录制]                   │
└─────────────────────────────────────────┘
```

### 4.2 录制中状态

```
┌─────────────────────────────────────────┐
│ 🔴 正在录制 - 会议记录                    │
├─────────────────────────────────────────┤
│ 录制时长: 00:05:32                       │
│ 文件大小: 12.3 MB                        │
├─────────────────────────────────────────┤
│ 音频波形 ████▌░░░░░░                     │
│ 系统音频: ████████░░                     │
│ 麦克风: ██░░░░░░░░░░                      │
├─────────────────────────────────────────┤
│ [⏸️ 暂停] [⏹️ 停止] [⚙️ 设置]             │
├─────────────────────────────────────────┤
│ 📝 实时转录                              │
│ 状态: 🟢 转录中 | 模型: whisper-base     │
├─────────────────────────────────────────┤
│ 转录文本区域                              │
│ ┌─────────────────────────────────────┐ │
│ │ [00:01:23] 今天我们来讨论一下...      │ │
│ │ [00:01:45] 关于这个项目的进展情况     │ │
│ │ [00:02:10] 我认为我们需要...          │ │
│ │ [00:02:30] 是的，我同意你的观点       │ │
│ │                                     │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│ AI 操作栏                                │
│ [📋 摘要] [✅ 任务] [🌐 翻译] [❓ 提问]    │
└─────────────────────────────────────────┘
```

## 5. 交互行为

### 5.1 权限检查
- 启动时检查必要权限
- 权限缺失时显示引导提示
- 提供快速跳转到系统设置

### 5.2 音频预览
- 实时显示音频电平
- 支持静音检测
- 显示音频质量指示

### 5.3 录制控制
- 开始/暂停/停止录制
- 显示录制进度
- 显示文件大小
- 支持快捷键控制

### 5.4 错误处理
- 权限错误提示
- 存储空间不足提示
- 音频设备错误提示
- 提供错误解决建议

### 5.5 转录交互
- **文本操作**：
  - 选择文本
  - 复制文本
  - 编辑文本
  - 添加标记
  - 搜索文本
- **AI 操作**：
  - 生成摘要
  - 提取任务
  - 翻译文本
  - 智能问答
- **错误处理**：
  - 转录错误提示
  - 网络错误处理
  - 模型加载错误
  - 提供重试选项

## 6. 快捷键支持

- `Cmd+R`：开始/停止录制
- `Cmd+P`：暂停/继续录制
- `Space`：暂停/继续录制
- `Esc`：停止录制
- `Cmd+F`：搜索转录文本
- `Cmd+C`：复制选中文本
- `Cmd+E`：编辑文本
- `Cmd+S`：保存转录

## 7. 状态栏集成

- 显示录制状态
- 显示录制时长
- 快速控制按钮
- 显示文件大小

## 8. 性能要求

- 启动时间 < 1s
- 音频延迟 < 100ms
- 转录延迟 < 2s
- 文本更新频率 > 10fps
- CPU 使用率 < 50%
- 内存使用 < 500MB

## 9. 数据安全

- 本地存储加密
- 网络传输加密
- 隐私数据处理
- 自动清理机制

## 10. 交互行为

### 10.1 权限检查
- 启动时检查必要权限
- 权限缺失时显示引导提示
- 提供快速跳转到系统设置

### 10.2 音频预览
- 实时显示音频电平
- 支持静音检测
- 显示音频质量指示

### 10.3 录制控制
- 开始/暂停/停止录制
- 显示录制进度
- 显示文件大小
- 支持快捷键控制

### 10.4 错误处理
- 权限错误提示
- 存储空间不足提示
- 音频设备错误提示
- 提供错误解决建议

### 10.5 转录交互
- **文本操作**：
  - 选择文本
  - 复制文本
  - 编辑文本
  - 添加标记
  - 搜索文本
- **AI 操作**：
  - 生成摘要
  - 提取任务
  - 翻译文本
  - 智能问答
- **错误处理**：
  - 转录错误提示
  - 网络错误处理
  - 模型加载错误
  - 提供重试选项

## 11. 状态栏集成

- 显示录制状态
- 显示录制时长
- 快速控制按钮
- 显示文件大小

## 12. 性能要求

- 启动时间 < 1s
- 音频延迟 < 100ms
- 转录延迟 < 2s
- 文本更新频率 > 10fps
- CPU 使用率 < 50%
- 内存使用 < 500MB 